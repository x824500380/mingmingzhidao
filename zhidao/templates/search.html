<!DOCTYPE HTML>
<html>

<head>
    <title>明明KNOWS</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes" />
    <!--[if lte IE 8]>
	<script src="./static/js/ie/html5shiv.js"></script>
	<![endif]-->
	<link rel="stylesheet" type="text/css" href="./static/css/bootstrap.min.css">
		
		<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="http://libs.baidu.com/bootstrap/3.0.3/js/bootstrap.min.js"></script>
    <link rel='stylesheet' href='./static/search/css/style.css' media='screen'>
    <script type="text/javascript" src="./static/search/js/jquery.min.js"></script>
    <script type="text/javascript" src="./static/search/js/jquery.lazyload.min.js"></script>
    <script type="text/javascript" src="./static/search/js/blocksit.min.js"></script>
</head>

<body>

    <!-- Header -->
    <div class="row-fluid">
                    <div class="span12">
                         {% if user.is_authenticated %} 
                    <span class="glyphicon glyphicon-user"></span>
                    <span>{{ user }}</span>
                    <div><a href="./logout"><span>退出</span></a>
                    <a href=""><span>个人中心</span></a>
                    </div>
                    {% else %} 
                    <a href="./login"><span class="glyphicon glyphicon-user"></span></a>
                    <span>欢迎，请 <a href="./login">登录</a></span>
                    {% endif %}     
                    </div>
                </div>
    {% autoescape off %}
    <div id="wrapper" class="container">
        <div id="container" class="row">
            {% for sa in question1 %}
            <div class="grid col-xs-12">
                <div class="imgholder"><img class="lazy" src="./static/search/images/pixel.gif" data-original="./static/search/images/adde8400jw1e7oix9df03j20i20axac6.jpg" width="175" /></div>
                {{sa.title}}
                <br>
                <div class="accordion-inner">
                    <h4 style="font-color:red;">描述</h4>
                    <p>{{sa.Description}}</p>
                </div>
                <div>
                    <h4 tyle="font-color:red;">回答</h4> {% for item in sa.bestanswer %}
                    <h4 tyle="font-color:red;">最佳答案</h4>
                    <h5>{{item.Content}}</h5>
                    <hr> {% empty %}
                    <h4>No Best Answer</h4> {% endfor %} {% for item in sa.answers %}
                    <h4 tyle="font-color:red;">其他回答</h4>
                    <h5>{{item.Content}}</h5>
                    <hr> {% empty %}
                    <h4>No Answer</h4> {% endfor %}
                </div>
                <hr>
            </div>
            {% endfor %} {%for line in html%}
            <div class="grid col-xs-12">
                <div class="imgholder"><img class="lazy" src="./static/search/images/pixel.gif" data-original="./static/search/images/adde8400jw1e7oix9df03j20i20axac6.jpg" width="175" /></div>
                <a href={{line.link}}>{{line.title}}</a>
                <br>
                <h4 tyle="font-color:red;">描述</h4> {%if line.question%}{{line.question}} {%else%} <em>no description</em> {%endif%}
                <br>
                <h4 tyle="font-color:red;">回答</h4> {{line.answer}}
                <hr>
            </div>
            {%endfor%}
        </div>
    </div>
    {% for test in list %}
    <div id="test{{forloop.counter}}" style="display:none;">
        {% for line in test.list %}
        <div class="grid col-xs-12">
            <div class="imgholder"><img class="lazy" src="./static/search/images/pixel.gif" data-original="./static/search/images/adde8400jw1e7oix9df03j20i20axac6.jpg" width="175" /></div>
            <a href={{line.link}}>{{line.title}}</a>
            <br>
            <h4 tyle="font-color:red;">描述</h4> {%if line.question%}{{line.question}} {%else%} <em>no description</em> {%endif%}
            <br>
            <h4 tyle="font-color:red;">回答</h4> {{line.answer}}
            <hr>
        </div>
        {% endfor %}
    </div>
    {% endfor %} {% endautoescape %}
    <!-- Footer -->
    <!-- Scripts -->
    <!--[if lte IE 8]>
	<script src="./static/js/ie/respond.min.js"></script>
	<![endif]-->
	<footer class="row-fluid navbar-fixed-bottom">
		<button class="btn col-xs-push-10 col-xs-2 col-sm-push-11 col-sm-1 col-md-push-11 col-md-1 col-lg-push-11 col-lg-1" id="btnmore">More</button>
	</footer>
    <script type="text/javascript">
    //window resize
        var currentWidth = 1100;
        var col=4;
        $(window).resize(function() {
            var winWidth = $(window).width();
            var conWidth;
            if (winWidth < 660) {
                conWidth = 440;
                col = 2
            } else if (winWidth < 880) {
                conWidth = 660;
                col = 3
            } else if (winWidth < 1100) {
                conWidth = 880;
                col = 4;
            } else {
                conWidth = 1100;
                col = 5;
            }

            if (conWidth != currentWidth) {
                currentWidth = conWidth;
                $('#container').width(conWidth);
                $('#container').BlocksIt({
                    numOfCol: col,
                    offsetX: 8,
                    offsetY: 8
                });
            }
        });
    var num = 1;
    $(function() {
        $("img.lazy").lazyload({
            load: function() {
                $('#container').BlocksIt({
                    numOfCol: col,
                    offsetX: 8,
                    offsetY: 8
                });
            }
        });
          window.onload = function () {
            document.getElementById("btnmore").onclick = function () {
               $('#container').append($("#test" + parseInt(num)).html());
                $('#container').BlocksIt({
                    numOfCol: col,
                    offsetX: 8,
                    offsetY: 8
                });
                $("img.lazy").lazyload();
                num = num + 1;
            }
        }

        
    });
    //window resize
        var currentWidth = 1100;
        $(window).resize(function() {
            var winWidth = $(window).width();
            var conWidth;
            if (winWidth < 660) {
                conWidth = 440;
                col = 2
            } else if (winWidth < 880) {
                conWidth = 660;
                col = 3
            } else if (winWidth < 1100) {
                conWidth = 880;
                col = 4;
            } else {
                conWidth = 1100;
                col = 5;
            }

            if (conWidth != currentWidth) {
                currentWidth = conWidth;
                $('#container').width(conWidth);
                $('#container').BlocksIt({
                    numOfCol: col,
                    offsetX: 8,
                    offsetY: 8
                });
            }
        });
    </script>
</body>

</html>
